---
globs: "src/components/**/*.{ts,tsx}"
description: "React 19 컴포넌트 작성 규칙"
---

# React Component Rules

## 컴포넌트 구조
- 함수형 컴포넌트만 사용 (class component 금지)
- Props는 interface로 정의, 컴포넌트 바로 위에 선언
- 파일당 하나의 export default 컴포넌트
- 내부 헬퍼 컴포넌트는 같은 파일 내 non-export로 가능

```typescript
interface FeatureCardProps {
  title: string;
  description: string;
  icon?: React.ReactNode;
  onClick?: () => void;
}

export default function FeatureCard({ title, description, icon, onClick }: FeatureCardProps) {
  return (
    <div className="rounded-xl border p-6 hover:shadow-md transition-shadow" onClick={onClick}>
      {icon && <div className="mb-4">{icon}</div>}
      <h3 className="text-lg font-semibold">{title}</h3>
      <p className="mt-2 text-gray-600">{description}</p>
    </div>
  );
}
```

## 폴더 구조
```
src/components/
├── ui/              # 재사용 가능한 프리미티브
│   ├── button.tsx   # <Button />
│   ├── input.tsx    # <Input />
│   ├── card.tsx     # <Card />
│   └── modal.tsx    # <Modal />
├── layout/          # 레이아웃 컴포넌트
│   ├── header.tsx
│   └── footer.tsx
└── features/        # 기능별 컴포넌트
    ├── Analysis/
    │   ├── analysis-form.tsx
    │   └── analysis-result.tsx
    └── Dashboard/
        └── dashboard-card.tsx
```

## UI 컴포넌트 패턴
```typescript
// ui/ 컴포넌트는 forwardRef + variants 패턴 사용
import { forwardRef } from "react";
import { cn } from "@/lib/utils";

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: "primary" | "secondary" | "ghost";
  size?: "sm" | "md" | "lg";
}

const Button = forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant = "primary", size = "md", ...props }, ref) => {
    return (
      <button
        ref={ref}
        className={cn(
          "inline-flex items-center justify-center rounded-lg font-medium transition-colors",
          variant === "primary" && "bg-blue-600 text-white hover:bg-blue-700",
          variant === "secondary" && "border border-gray-300 hover:bg-gray-50",
          variant === "ghost" && "hover:bg-gray-100",
          size === "sm" && "h-8 px-3 text-sm",
          size === "md" && "h-10 px-4",
          size === "lg" && "h-12 px-6 text-lg",
          className
        )}
        {...props}
      />
    );
  }
);
Button.displayName = "Button";
export default Button;
```

## React 19 패턴
- `use()` 훅으로 Promise/Context 읽기
- `useActionState()`로 form action 상태 관리
- `useOptimistic()`으로 낙관적 업데이트
- `<form action={serverAction}>` 패턴 활용

## 금지 사항
- inline style 사용 금지 → TailwindCSS 클래스 사용
- `any` 타입 금지 → 명시적 타입 정의
- `useEffect` 내부에서 데이터 패칭 금지 → Server Component 또는 React Query 사용
- index.ts barrel exports 과도한 사용 금지
